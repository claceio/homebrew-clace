# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Clace < Formula
  desc ""
  homepage "https://clace.io"
  version "0.11.9"

  on_macos do
    on_intel do
      url "https://github.com/claceio/clace/releases/download/v0.11.9/clace-v0.11.9-darwin-amd64.tar.gz"
      sha256 "8153710896cb0fe4723823b14f2c9f26812c5c4243a5693016a5b66b3d1d274c"

      def install
        bin.install "clace"
      end
    end
    on_arm do
      url "https://github.com/claceio/clace/releases/download/v0.11.9/clace-v0.11.9-darwin-arm64.tar.gz"
      sha256 "56124977c82e89c847df34e7628e2d603f310ceaa792f4f26f44ff6a96f7ad7b"

      def install
        bin.install "clace"
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/claceio/clace/releases/download/v0.11.9/clace-v0.11.9-linux-amd64.tar.gz"
        sha256 "8ba2d5334ea0cc8bc7e547dc71fd1873152141a9d554607612ff225e30737341"

        def install
          bin.install "clace"
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/claceio/clace/releases/download/v0.11.9/clace-v0.11.9-linux-arm64.tar.gz"
        sha256 "38836aa4b5f5821cec477787abc33f5c39a528752cc12920f2bf577254231a12"

        def install
          bin.install "clace"
        end
      end
    end
  end

  def post_install
    unless File.exist?("#{etc}/clace.toml")
      system "#{opt_bin}/clace password > #{etc}/clace.toml"
    end
  end

  service do
    run [ opt_bin/"clace" ]
    keep_alive true
    working_dir HOMEBREW_PREFIX
    log_path var/"log/clace.log"
    error_log_path var/"log/clace.log"
  end
end
