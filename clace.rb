# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Clace < Formula
  desc ""
  homepage "https://clace.io"
  version "0.11.10"

  on_macos do
    on_intel do
      url "https://github.com/claceio/clace/releases/download/v0.11.10/clace-v0.11.10-darwin-amd64.tar.gz"
      sha256 "5b227d7cb7d08f0fe9f8f7f7b017682b208e913d300b0648f8e26ae6c7599ffc"

      def install
        bin.install "clace"
      end
    end
    on_arm do
      url "https://github.com/claceio/clace/releases/download/v0.11.10/clace-v0.11.10-darwin-arm64.tar.gz"
      sha256 "206f1f576845e6b83c50c4f6177eb92cfa279d55d750d8c53feb3407b3f26c03"

      def install
        bin.install "clace"
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/claceio/clace/releases/download/v0.11.10/clace-v0.11.10-linux-amd64.tar.gz"
        sha256 "e2ba3ba3e6c50c53993d3c87cea417c544a4f64717f5cc78146cfca12badace6"

        def install
          bin.install "clace"
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/claceio/clace/releases/download/v0.11.10/clace-v0.11.10-linux-arm64.tar.gz"
        sha256 "f7b28810b8f26bdb877ea302bc1668da516af2874e0273269c7abcb4bace9728"

        def install
          bin.install "clace"
        end
      end
    end
  end

  def post_install
    unless File.exist?("#{etc}/clace.toml")
      stderr = Utils.popen_read("#{opt_bin}/clace password 1>#{etc}/clace.toml 2>&1")
      puts stderr
    end
  end

  service do
    run [ opt_bin/"clace" ]
    keep_alive true
    working_dir HOMEBREW_PREFIX
    log_path var/"log/clace.log"
    error_log_path var/"log/clace.log"
  end
end
