# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Clace < Formula
  desc ""
  homepage "https://clace.io"
  version "0.11.8"

  on_macos do
    on_intel do
      url "https://github.com/claceio/clace/releases/download/v0.11.8/clace-v0.11.8-darwin-amd64.tar.gz"
      sha256 "ab1378441f381d0205950b5be57d34f68aa38ffe7c043c3d2e731e6800331104"

      def install
        bin.install "clace"
      end
    end
    on_arm do
      url "https://github.com/claceio/clace/releases/download/v0.11.8/clace-v0.11.8-darwin-arm64.tar.gz"
      sha256 "87b68f19da18ee35fb468520b14a8213a338337b5b48b969603f06b0ca06a7f9"

      def install
        bin.install "clace"
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/claceio/clace/releases/download/v0.11.8/clace-v0.11.8-linux-amd64.tar.gz"
        sha256 "9bb528253ef132c12185ec1f2e4a609d0bdaa6f6f70ba546094bbf7ffba7dbb2"

        def install
          bin.install "clace"
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/claceio/clace/releases/download/v0.11.8/clace-v0.11.8-linux-arm64.tar.gz"
        sha256 "340cf1e8606ada0df4f0854f2ee9d6e5bc889c6f6f19b53324ef6a93059ab247"

        def install
          bin.install "clace"
        end
      end
    end
  end

  def post_install
    # Create config directory if it doesn't exist
    if [ ! -f "\#{etc}/clace.toml" ]; then
      echo "Initializing Clace..."
      "\#{opt_bin}/clace" password > "\#{etc}/clace.toml"
    fi
  end

  service do
    run [ opt_bin/"clace" ]
    keep_alive true
    working_dir HOMEBREW_PREFIX
    log_path var/"log/clace.log"
    error_log_path var/"log/clace.log"
  end
end
